refactoring_to_patterns